// 실시간 비디오 화질 개선 스크립트
document.addEventListener('DOMContentLoaded', function() {
  const video = document.querySelector('.hero-video');
  
  if (!video) return;
  
  console.log('🎬 실시간 화질 최적화 시작...');
  
  // 화질 개선 함수
  function enhanceVideoQuality() {
    // 비디오 엘리먼트에 고화질 속성 추가
    video.style.cssText += `
      filter: brightness(1.03) contrast(1.15) saturate(1.25) blur(0px) !important;
      image-rendering: -webkit-optimize-contrast !important;
      image-rendering: crisp-edges !important;
      transform: translate3d(0, 0, 0) !important;
      backface-visibility: hidden !important;
      will-change: transform !important;
    `;
    
    // 비디오 자체 속성 최적화
    video.setAttribute('webkit-playsinline', 'true');
    video.setAttribute('playsinline', 'true');
    video.setAttribute('preload', 'auto');
    
    console.log('✅ 화질 개선 필터 적용됨');
  }
  
  // 고화질 모드 토글 함수
  window.toggleHighQuality = function() {
    const currentFilter = video.style.filter;
    
    if (currentFilter.includes('contrast(1.15)')) {
      // 초고화질 모드
      video.style.filter = 'brightness(1.05) contrast(1.2) saturate(1.3) sharpen(1) blur(0px)';
      console.log('🚀 초고화질 모드 활성화');
      showNotification('초고화질 모드 ON');
    } else {
      // 일반 화질로 복원  
      video.style.filter = 'brightness(1.03) contrast(1.15) saturate(1.25) blur(0px)';
      console.log('📺 일반 화질 모드');
      showNotification('일반 화질 모드');
    }
  };
  
  // 알림 표시 함수
  function showNotification(message) {
    const notification = document.createElement('div');
    notification.style.cssText = `
      position: fixed;
      top: 20px;
      right: 20px;
      background: rgba(0,0,0,0.8);
      color: #66fcf1;
      padding: 10px 20px;
      border-radius: 5px;
      z-index: 9999;
      font-family: Arial, sans-serif;
      font-size: 14px;
      transition: opacity 0.3s ease;
    `;
    notification.textContent = message;
    document.body.appendChild(notification);
    
    setTimeout(() => {
      notification.style.opacity = '0';
      setTimeout(() => document.body.removeChild(notification), 300);
    }, 2000);
  }
  
  // 비디오 로드 시 화질 개선 적용
  video.addEventListener('loadeddata', enhanceVideoQuality);
  video.addEventListener('canplay', enhanceVideoQuality);
  
  // 즉시 적용
  enhanceVideoQuality();
  
  // 키보드 단축키: Q키로 화질 토글
  document.addEventListener('keydown', function(e) {
    if (e.key.toLowerCase() === 'q') {
      toggleHighQuality();
    }
  });
  
  console.log('💡 팁: Q키를 눌러서 초고화질 모드를 토글할 수 있습니다!');
});
